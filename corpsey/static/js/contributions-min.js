$.corpsey=$.corpsey||{},$.corpsey.contributions=function(){function t(){$(".button.yea").click(function(t){t.preventDefault();var n=$(this).parents(".queue:first"),i=n.attr("data-contribution-id");return $.get("/contribution_vote/",{contribution_id:i,yea:1}).done(function(t){e(t)}),!1}),$(".button.nay").click(function(t){return t.preventDefault(),$("#rules").hide().appendTo($(this).parents(".actions:first")).slideDown(),!1}),$(".button.rule").click(function(t){t.preventDefault();var n="",i="",o=$(this).parents(".queue:first"),r=o.attr("data-contribution-id");if($(this).hasClass("other")){if(""===(i=$("#notes").val()))return alert("Please write one or two sentences about what could make their piece better."),!1}else n=$(this).attr("data-rule-id");return $.get("/contribution_vote/",{contribution_id:r,yea:"",rule_broke:n,notes:i}).done(function(t){e(t)}),!1})}function e(t){""!==t.message&&alert(t.message),$("#rules").slideUp().find("#notes").val(""),$(".queue[data-contribution-id="+t.contribution_id+"]").addClass("voted").toggleClass("yea",1===t.yea).toggleClass("nay",0===t.yea).find(".actions").slideUp()}return{init:function(){t()},after_vote:function(t,n){e(t,n)}}}(),$(window).ready(function(){$.corpsey.contributions.init()});